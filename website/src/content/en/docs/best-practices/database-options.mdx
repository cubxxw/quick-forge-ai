---
title: Database Configuration Options
description: Learn how to configure and switch between PostgreSQL and Supabase database options in Quick Forge AI
category: Best Practices
---

# Database Configuration Options

Quick Forge AI supports two database deployment options, giving you flexibility in your development and production environments:

1. **Direct PostgreSQL Deployment (Default)**: A PostgreSQL database deployed alongside your application using Docker
2. **Supabase Cloud Service**: Connect to a managed PostgreSQL database in Supabase cloud

This guide will walk you through both options, including detailed steps for configuration and switching between them.

## Prerequisites

Before you begin, make sure you have:

- Quick Forge AI installed and set up
- Docker and Docker Compose (required for PostgreSQL direct deployment)
- A Supabase account (required for Supabase option) - [Sign up here](https://supabase.com)

## Using the Configuration Helper

The easiest way to configure your database is using our built-in configuration helper:

```bash
make configure-db
```

This interactive script will:
1. Prompt you to choose your database option
2. Guide you through entering the necessary configuration details
3. Update your `.env` file with the correct settings
4. Prepare your environment for the selected database option

## Option 1: Direct PostgreSQL Deployment

### Automated Setup

1. Run the configuration helper:
   ```bash
   make configure-db
   ```

2. Select option 1 for Direct PostgreSQL deployment:
   ```
   Please select your database option:
   1) Direct PostgreSQL deployment (default)
   2) Supabase cloud service
   Enter your choice (1/2): 1
   ```

3. Enter the PostgreSQL configuration details when prompted:
   ```
   PostgreSQL server (default: db): 
   PostgreSQL port (default: 5432): 
   PostgreSQL user (default: postgres): 
   PostgreSQL password: your_secure_password
   PostgreSQL database name (default: app): 
   ```

4. Start your services:
   ```bash
   docker-compose up -d
   ```

### Manual Setup

If you prefer to configure manually, update your `.env` file with these settings:

```
# PostgreSQL Direct Deployment Configuration
USE_SUPABASE=false
USE_POSTGRES_SERVICE=default
USE_POSTGRES_PRESTART_SERVICE=default
POSTGRES_SERVER=db
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password
POSTGRES_DB=app
```

Then start your services:
```bash
docker-compose up -d
```

## Option 2: Supabase Cloud Service

### Creating a Supabase Project

1. Sign in to your [Supabase account](https://app.supabase.com)
2. Click "New Project" and select your organization
3. Enter a project name and secure database password
4. Choose a region close to your target users
5. Wait for your project to be created (usually takes 2-3 minutes)

### Getting Your Supabase Connection String

1. In your Supabase project dashboard, go to "Settings" â†’ "Database"
2. Scroll down to "Connection String" and select "URI"
3. Copy the connection string, which will look like:
   ```
   postgresql://postgres:your-password@db.abcdefghijkl.supabase.co:5432/postgres
   ```

### Automated Setup

1. Run the configuration helper:
   ```bash
   make configure-db
   ```

2. Select option 2 for Supabase cloud service:
   ```
   Please select your database option:
   1) Direct PostgreSQL deployment (default)
   2) Supabase cloud service
   Enter your choice (1/2): 2
   ```

3. Enter your Supabase connection URL when prompted:
   ```
   Enter your Supabase connection URL (postgresql://...): postgresql://postgres:your-password@db.abcdefghijkl.supabase.co:5432/postgres
   ```

4. Start your services:
   ```bash
   docker-compose up -d
   ```

### Manual Setup

If you prefer to configure manually, update your `.env` file with these settings:

```
# Supabase Configuration
USE_SUPABASE=true
SUPABASE_URL=postgresql://postgres:your-password@db.abcdefghijkl.supabase.co:5432/postgres
USE_POSTGRES_SERVICE=none
USE_POSTGRES_PRESTART_SERVICE=none
```

Then start your services:
```bash
docker-compose up -d
```

## Switching Between Options

You can switch between PostgreSQL direct deployment and Supabase at any time:

1. Run the configuration helper again:
   ```bash
   make configure-db
   ```

2. Select your new database option and follow the prompts

3. Stop and restart your services:
   ```bash
   docker-compose down
   docker-compose up -d
   ```

**Important**: When switching database options, your data will not be automatically migrated. You will need to handle data migration manually if needed.

## Migrating Data Between Databases

### Exporting from PostgreSQL

```bash
# For direct PostgreSQL deployment
docker-compose exec db pg_dump -U postgres -d app > database_backup.sql

# For Supabase (install psql client locally)
pg_dump "postgresql://postgres:your-password@db.abcdefghijkl.supabase.co:5432/postgres" > database_backup.sql
```

### Importing to a New Database

```bash
# For direct PostgreSQL deployment
cat database_backup.sql | docker-compose exec -T db psql -U postgres -d app

# For Supabase (install psql client locally)
psql "postgresql://postgres:your-password@db.abcdefghijkl.supabase.co:5432/postgres" < database_backup.sql
```

## How It Works

Quick Forge AI implements this feature through:

1. Configuration settings in `backend/app/core/config.py`
2. Docker Compose service profiles in `docker-compose.yml`
3. The configuration helper script at `scripts/configure-database.sh`

### Technical Details

- When using direct PostgreSQL, the `db` service in Docker Compose is activated
- When using Supabase, the `db` service is disabled and the backend connects directly to Supabase
- The environment variable `USE_SUPABASE` controls which database configuration is used
- Backend database URI logic in `backend/app/core/config.py` decides the connection details

## Troubleshooting

### Connection Issues with Supabase

- Check if your Supabase project is active
- Verify that your connection string is correct
- Ensure your IP address is allowed in Supabase networking settings

### PostgreSQL Direct Deployment Issues

- Check if the PostgreSQL container is running with `docker-compose ps`
- View PostgreSQL logs with `docker-compose logs db`
- Ensure your `.env` has the correct database credentials

## Best Practices

- **Development**: Use direct PostgreSQL deployment for ease of development
- **Testing**: Consider Supabase for shared testing environments
- **Production**: Choose based on your scaling needs and management preferences
- **CI/CD**: For CI, the direct PostgreSQL option can be more reliable

By supporting both options, Quick Forge AI gives you the flexibility to choose the right database approach for your specific needs and project phase. 